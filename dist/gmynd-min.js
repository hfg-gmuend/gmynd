window.gmynd={groupData:function(t,e){this.isArray(e)||(e=[e]);let r={},n=e.shift();for(let e=0;e<t.length;e++){let a=t[e];if(Array.isArray(a[n]))for(let t=0;t<a[n].length;t++){let e=a[n][t];r[e]||(r[e]=[]),r[e].push(a)}else{let t=a[n];r[t]||(r[t]=[]),r[t].push(a)}}if(e.length>0){let t=Object.entries(r);for(let n=0;n<t.length;n++){let a=this.groupData(t[n][1],[...e]);r[t[n][0]]=a}}return r},cumulateData:function(t,e,r=[]){this.isArray(e)||(e=[e]),this.isArray(r)||(r=[r]);let n={};for(let r=0;r<t.length;r++){let a=t[r][e[0]];for(let n=1;n<e.length;n++)a+=","+t[r][e[n]];n[a]||(n[a]=[]),n[a].push(t[r])}n=Object.values(n);let a=[];for(let t=0;t<n.length;t++){let l={};for(let r=0;r<e.length;r++)l[e[r]]=n[t][0][e[r]];l.count=n[t].length;for(let e=0;e<r.length;e++){let a=r[e].title;a||(a=r[e].value+r[e].method),l[a]=n[t].map((t=>parseFloat(t[r[e].value]))),"Sum"===r[e].method&&(l[a]=l[a].reduce(((t,e)=>t+e))),"Average"===r[e].method&&(l[a]=l[a].reduce(((t,e)=>t+e))/l.count),"Min"===r[e].method&&(l[a]=l[a].reduce(((t,e)=>t<e?t:e))),"Max"===r[e].method&&(l[a]=l[a].reduce(((t,e)=>t>e?t:e))),"Median"===r[e].method&&(l[a]=o(l[a],.5)),"Percentile"===r[e].method&&(l[a]=o(l[a],r[e].p))}a.push(l)}return a;function o(t,e){t.sort(((t,e)=>t<e?-1:t>e?1:0));let r=(t.length-1)*e,n=r%1,a=t[Math.floor(r)];return a+(t[Math.ceil(r)]-a)*n}},mergeData:function(t,e,r,n=r){if(this.isArray(r)||(r=[r]),this.isArray(n)||(n=[n]),r.length!==n.length)return!1;let a=[],o=[];return t.forEach((t=>{let l=Object.assign({},t);e.some((e=>{let a=!0;for(let o=0;o<r.length;o++)t[r[o]]!==e[n[o]]&&(a=!1);if(a)for(let t in e)e.hasOwnProperty(t)&&!n.includes(t)&&(l[t]=e[t]);return a}))?a.push(l):o.push(l)})),o.length,a},intersectData:function(t,e,r,n=r){let a=[];return t.forEach(((o,l)=>{let i=!1;e.forEach((t=>{o[r]===t[n]&&(i=!0)})),i&&a.push(t[l])})),a},deleteIncompleteData:function(t,e){this.isArray(e)||(e=[e]);let r=[];return t.forEach((t=>{let n=!1;e.forEach((e=>{t.hasOwnProperty(e)&&void 0!==t[e]&&null!==t[e]&&""!==t[e]||(n=!0)})),n||r.push(t)})),r},deleteDuplicateData:function(t,e,r=!0){let n=[];return t.forEach((t=>{let a=!0;n.forEach(((o,l)=>{o[e]===t[e]&&(a=!1,r||(n[l]=t))})),a&&n.push(t)})),n},filterPropType:function(t,e,r){r=r.trim().toLocaleLowerCase();let n=[...t];for(let t=0;t<n.length;t++){let a,o=n[t][e];switch(r){case"boolean":a="boolean"==typeof o;break;case"integer":a=parseInt(o)===o&&!isNaN(o);break;case"number":a=Number(o)===o&&!isNaN(o);break;case"string":a=this.isString(o);break;case"array":a=this.isArray(o);break;case"object":a=this.isObject(o);break;default:a=!1}a||(n.splice(t,1),t--)}return n},convertPropToNumber:function(t,e,r=!0){let n=[...t];return n.forEach((t=>{let n=t[e];if(this.isString(n))for(n=n.trim().replace(/,/g,".").replace(/'/g,"").replace(/\s/g,"");n.indexOf(".")!==n.lastIndexOf(".");)n=n.replace(".","");n=Number(n),isNaN(n)&&(n=r?null:t[e]),t[e]=n})),n},convertPropToBoolean:function(t,e,r=!1){let n=[...t];const a=["1","true","yes","+","wahr","ja"];return n.forEach((t=>{let n,o=!!t.hasOwnProperty(e)&&t[e];n=!0===o||(this.isString(o)?a.includes(o.trim().toLowerCase()):!isNaN(o)&&(r?1===o:o>=1)),t[e]=n})),n},addPropPercentage:function(t,e,r=e+"Percentage"){let n=[...t];const a=this.dataSum(n,e);return n.forEach((t=>{t[r]=t[e]/a})),n},addPropSegment:function(t,e,r,n=null,a=null,o=e+"SegmentOf"+r){let l=[...t];const i=n||this.dataMin(t,e),u=a||this.dataMax(t,e),s=Math.abs(u-i)/r;return l.forEach((t=>{t[o]=Math.floor((t[e]-i)/s),t[o]>=r&&(t[o]=r-1)})),l},addPropRank:function(t,e,r=e+"Rank"){let n=[...t];this.sortData(n,e);let a=0;return n.forEach((t=>{t.hasOwnProperty(e)&&(a>0&&t[e]===n[a-1][e]?t[r]=n[a-1][r]:t[r]=a,a++)})),n},findAllByValue:function(t,e,r){return t.filter((t=>t[e]===r))},findFirstByValue:function(t,e,r){let n=this.findAllByValue(t,e,r);return n.length>0?n[0]:null},dataMax:function(t,e){return Math.max.apply(Math,t.map((function(t){return t[e]?t[e]:-1/0})))},dataMin:function(t,e){return Math.min.apply(Math,t.map((function(t){return t[e]?t[e]:1/0})))},dataSum:function(t,e){return t.reduce(((t,r)=>t+(r[e]||0)),0)},dataExtremes:function(t,e){return{min:this.dataMin(t,e),max:this.dataMax(t,e)}},arrayFromProps:function(t,e,r=null){let n=[];return e.forEach((e=>{n.push(t.hasOwnProperty(e)?t[e]:r)})),n},arrayFromPropsInData:function(t,e,r,n=!0,a=null){return t.forEach((t=>{t[r]=this.arrayFromProps(t,e,a),n&&this.deleteProps(t,e)})),t},deleteProps:function(t,e){this.isArray(e)||(e=[e]),e.forEach((e=>{t.hasOwnProperty(e)&&delete t[e]}))},deletePropsInData:function(t,e){this.isArray(e)||(e=[e]),t.forEach((t=>{e.forEach((e=>{delete t[e]}))}))},sortData:function(t,e){return this.isArray(e)||(e=[e]),t.sort(((t,r)=>{let n=0;for(let a=0;a<e.length;a++){let o=e[a],l=1;if("-"===o[0]&&(l=-1,o=o.substr(1)),n=t[o]<r[o]?-1:t[o]>r[o]?1:0,n*=l,0!=n)break}return n}))},download:function(t,e){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(t,e);else{let r=document.createElement("a"),n=URL.createObjectURL(t);r.href=n,r.download=e,document.body.appendChild(r),r.click(),setTimeout((function(){document.body.removeChild(r),window.URL.revokeObjectURL(n)}),0)}},saveData:function(t,e="export.json",r=!0){let n=JSON.stringify(t);r&&(n=n.replaceAll("}","\n}")),r&&(n=n.replaceAll("{","{\n\t")),r&&(n=n.replaceAll(',"',',\n\t"'));const a=new Blob([n],{type:"text/json"});this.download(a,e)},arraySum:function(t){return t.reduce(((t,e)=>Number(t)+Number(e)),0)},arrayCount:function(t,e){return t.filter((t=>t===e)).length},arrayAverage:function(t,e=!1){let r=[...t];return e&&(r=r.filter((t=>null!=t&&""!==t&&!isNaN(Number(t))))),this.arraySum(r)/r.length},arrayLast:function(t,e=!1){let r=null;if(e){let e;for(e=t.length-1;e>=0&&(!t[e]||""===t[e]||void 0===t[e]||null===t[e]);e--);r=t[e]}else r=t.slice(-1)[0];return r},shuffleArray:function(t){let e,r,n=t.length;for(;0!==n;)r=Math.floor(Math.random()*n),n-=1,e=t[n],t[n]=t[r],t[r]=e;return t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},clip:function(t,e,r){return t=(t=t<e?e:t)>r?r:t},map:function(t,e,r,n,a,o=!1){return o&&(t=this.clip(t,e,r)),(t-e)/(r-e)*(a-n)+n},random:function(t,e){return 0===arguments.length?(t=0,e=1):1!==arguments.length&&null!=e&&null!=e||(e=t,t=0),Math.random()*(e-t)+t},randomInt:function(t,e){return 0===arguments.length?(t=0,e=1):1!==arguments.length&&null!=e&&null!=e||(e=t,t=0),Math.floor(this.random(t,e+1))},circleRadius:function(t){return Math.sqrt(t/Math.PI)},circleArea:function(t){return Math.PI*t*t},radians:function(t){return t/180*Math.PI},degrees:function(t){return t/Math.PI*180},lerp:function(t,e,r){return t+r*(e-t)},distance:function(t,e,r,n){return Math.sqrt((r-=t)*r+(n-=e)*n)},cartesian:function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},polar:function(t,e){return{radius:Math.sqrt(t*t+e*e),angle:Math.atan2(e,t)}},duration:function(t,e){return Date.parse(e)-Date.parse(t)}};