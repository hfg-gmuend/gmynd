window.gmynd={groupData:function(e,r){let n={};var a=(r=!this.isArray(r)?[r]:r).shift();for(let t=0;t<e.length;t++){var o=e[t];if(Array.isArray(o[a]))for(let t=0;t<o[a].length;t++){var l=o[a][t];n[l]||(n[l]=[]),n[l].push(o)}else{var i=o[a];n[i]||(n[i]=[]),n[i].push(o)}}if(0<r.length){var s=Object.entries(n);for(let t=0;t<s.length;t++){var u=this.groupData(s[t][1],[...r]);n[s[t][0]]=u}}return n},cumulateData:function(n,a,o=[]){this.isArray(a)||(a=[a]),this.isArray(o)||(o=[o]);let l={};for(let r=0;r<n.length;r++){let e=n[r][a[0]];for(let t=1;t<a.length;t++)e+=","+n[r][a[t]];l[e]||(l[e]=[]),l[e].push(n[r])}l=Object.values(l);let t=[];for(let n=0;n<l.length;n++){let r={};for(let t=0;t<a.length;t++)r[a[t]]=l[n][0][a[t]];r.count=l[n].length;for(let e=0;e<o.length;e++){let t=o[e].title;t=t||o[e].value+o[e].method,r[t]=l[n].map(t=>parseFloat(t[o[e].value])),"Sum"===o[e].method&&(r[t]=r[t].reduce((t,e)=>t+e)),"Average"===o[e].method&&(r[t]=r[t].reduce((t,e)=>t+e)/r.count),"Min"===o[e].method&&(r[t]=r[t].reduce((t,e)=>t<e?t:e)),"Max"===o[e].method&&(r[t]=r[t].reduce((t,e)=>e<t?t:e)),"Median"===o[e].method&&(r[t]=i(r[t],.5)),"Percentile"===o[e].method&&(r[t]=i(r[t],o[e].p))}t.push(r)}return t;function i(t,e){t.sort((t,e)=>t<e?-1:e<t?1:0);var r=(t.length-1)*e,n=r%1,e=t[Math.floor(r)];return e+(t[Math.ceil(r)]-e)*n}},mergeData:function(t,e,o,l=o){if(this.isArray(o)||(o=[o]),this.isArray(l)||(l=[l]),o.length!==l.length)return console.error("The third and the fourth argument have to be arrays of the same length!"),!1;let r=[],i=[];return t.forEach(n=>{let a=Object.assign({},n);(e.some(e=>{let r=!0;for(let t=0;t<o.length;t++)n[o[t]]!==e[l[t]]&&(r=!1);if(r)for(var t in e)e.hasOwnProperty(t)&&!l.includes(t)&&(a[t]=e[t]);return r})?r:i).push(a)}),0<i.length&&(console.warn("Could not find matches for these entries:"),console.warn(i)),r},intersectData:function(n,a,o,l=o){let i=[];return n.forEach((e,t)=>{let r=!1;a.forEach(t=>{e[o]===t[l]&&(r=!0)}),r&&i.push(n[t])}),i},deleteIncompleteData:function(t,n,e=[]){this.isArray(n)||(n=[n]),this.isArray(e)||(e=[e]);let a=[void 0,null,""].concat(e),o=[];return t.forEach(e=>{let r=!1;n.forEach(t=>{(!e.hasOwnProperty(t)||a.includes(e[t]))&&(r=!0)}),r||o.push(e)}),o},deleteDuplicateData:function(t,a,o=!0){let l=[];return t.forEach(r=>{let n=!0;l.forEach((t,e)=>{t[a]===r[a]&&(n=!1,o||(l[e]=r))}),n&&l.push(r)}),l},filterPropType:function(t,r,n){n=n.trim().toLocaleLowerCase();let a=[...t];for(let e=0;e<a.length;e++){var o=a[e][r];let t;switch(n){case"boolean":t="boolean"==typeof o;break;case"integer":t=parseInt(o)===o&&!isNaN(o);break;case"number":t=Number(o)===o&&!isNaN(o);break;case"string":t=this.isString(o);break;case"array":t=this.isArray(o);break;case"object":t=this.isObject(o);break;default:t=!1}t||(a.splice(e,1),e--)}return a},convertPropToNumber:function(t,r,n=!0){let e=[...t];return e.forEach(t=>{let e=t[r];if(this.isString(e))for(e=e.trim().replace(/,/g,".").replace(/'/g,"").replace(/\s/g,"");e.indexOf(".")!==e.lastIndexOf(".");)e=e.replace(".","");e=Number(e),isNaN(e)&&(e=n?null:t[r]),t[r]=e}),e},convertPropToBoolean:function(t,n,a=!1){let e=[...t];const o=["1","true","yes","+","wahr","ja"];return e.forEach(t=>{let e=!!t.hasOwnProperty(n)&&t[n],r;r=!0===e||(this.isString(e)?o.includes(e.trim().toLowerCase()):!isNaN(e)&&(a?1===e:1<=e)),t[n]=r}),e},addPropPercentage:function(t,e,r=e+"Percentage"){let n=[...t];const a=this.dataSum(n,e);return n.forEach(t=>{t[r]=t[e]/a}),n},addPropSegment:function(t,e,r,n=null,a=null,o=e+"SegmentOf"+r){let l=[...t];const i={start:n||this.dataMin(t,e),end:a||this.dataMax(t,e)},s=Math.abs(i.end-i.start)/r;return l.forEach(t=>{t[o]=Math.floor((t[e]-i.start)/s),t[o]>=r&&(t[o]=r-1)}),l},addPropRank:function(t,e,r=e+"Rank"){let n=[...t];this.sortData(n,e);let a=0;return n.forEach(t=>{t.hasOwnProperty(e)&&(0<a&&t[e]===n[a-1][e]?t[r]=n[a-1][r]:t[r]=a,a++)}),n},findAllByValue:function(t,e,r){return t.filter(t=>t[e]===r)},findFirstByValue:function(t,e,r){r=this.findAllByValue(t,e,r);return 0<r.length?r[0]:null},dataMax:function(t,e){return Math.max.apply(Math,t.map(function(t){return t[e]||-1/0}))},dataMin:function(t,e){return Math.min.apply(Math,t.map(function(t){return t[e]||1/0}))},dataSum:function(t,r){return t.reduce((t,e)=>t+(e[r]||0),0)},dataExtremes:function(t,e){return{min:this.dataMin(t,e),max:this.dataMax(t,e)}},arrayFromProps:function(e,t,r=null){let n=[];return t.forEach(t=>{n.push(e.hasOwnProperty(t)?e[t]:r)}),n},arrayFromPropsInData:function(t,e,r,n=!0,a=null){return t.forEach(t=>{t[r]=this.arrayFromProps(t,e,a),n&&this.deleteProps(t,e)}),t},deleteProps:function(t,r){let e=!1;return this.isObject(t)?(this.isArray(t)||(t=[t],e=!0),this.isArray(r)||(r=[r]),t.forEach(e=>{r.forEach(t=>{delete e[t]})}),e?t[0]:t):(console.warn("Passed data has wrong type (must be array or object)."),t)},renameProps:function(t,e,n){let r=!1;return this.isObject(t)?(this.isArray(t)||(t=[t],r=!0),this.isArray(e)||(e=[e]),(e=!this.isArray(n)?[n]:e).length===n.length?t.forEach(r=>{e.forEach((t,e)=>{r.hasOwnProperty(t)&&(r[n[e]]=r[t],delete r[t])})}):console.warn(`Expecting same length of props and names [got ${e.length} prop(s) and ${n.length} name(s)].`),r?t[0]:t):(console.warn("Passed data has wrong type (must be array or object)."),t)},sortData:function(t,l){return this.isArray(l)||(l=[l]),t.sort((n,a)=>{let o=0;for(let r=0;r<l.length;r++){let t=l[r],e=1;if("-"===t[0]&&(e=-1,t=t.substr(1)),o=n[t]<a[t]?-1:n[t]>a[t]?1:0,o*=e,0!==o)break}return o})},download:function(r,n){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(r,n);else{let t=document.createElement("a"),e=URL.createObjectURL(r);t.href=e,t.download=n,document.body.appendChild(t),t.click(),setTimeout(function(){document.body.removeChild(t),window.URL.revokeObjectURL(e)},0)}},saveData:function(t,e="export.json",r=!0){let n=JSON.stringify(t);r&&(n=n.replaceAll("}","\n}")),r&&(n=n.replaceAll("{","{\n\t")),r&&(n=n.replaceAll(',"',',\n\t"'));r=new Blob([n],{type:"text/json"});this.download(r,e)},arraySum:function(t){return t.reduce((t,e)=>Number(t)+Number(e),0)},arrayCount:function(t,e){return t.filter(t=>t===e).length},arrayAverage:function(t,e=!1){let r=[...t];return e&&(r=r.filter(t=>null!=t&&""!==t&&!isNaN(Number(t)))),this.arraySum(r)/r.length},arrayLast:function(e,t=!1){let r=null;if(t){let t;for(t=e.length-1;0<=t&&(!e[t]||""===e[t]||void 0===e[t]||null===e[t]);t--);r=e[t]}else r=e.slice(-1)[0];return r},shuffleArray:function(t){let e=t.length,r,n;for(;0!==e;)n=Math.floor(Math.random()*e),--e,r=t[e],t[e]=t[n],t[n]=r;return t},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},clip:function(t,e,r){return t=r<(t=t<e?e:t)?r:t},map:function(t,e,r,n,a,o=!1){return((t=o?this.clip(t,e,r):t)-e)/(r-e)*(a-n)+n},random:function(t,e){return 0===arguments.length?(t=0,e=1):1!==arguments.length&&null!=e&&null!=e||(e=t,t=0),Math.random()*(e-t)+t},randomInt:function(t,e){return 0===arguments.length?(t=0,e=1):1!==arguments.length&&null!=e&&null!=e||(e=t,t=0),Math.floor(this.random(t,e+1))},circleRadius:function(t){return Math.sqrt(t/Math.PI)},circleArea:function(t){return Math.PI*t*t},radians:function(t){return t/180*Math.PI},degrees:function(t){return t/Math.PI*180},lerp:function(t,e,r){return t+r*(e-t)},distance:function(t,e,r,n){return Math.sqrt((r-=t)*r+(n-=e)*n)},cartesian:function(t,e){return{x:t*Math.cos(e),y:t*Math.sin(e)}},polar:function(t,e){return{radius:Math.sqrt(t*t+e*e),angle:Math.atan2(e,t)}},duration:function(t,e){return Date.parse(e)-Date.parse(t)}};